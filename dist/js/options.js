function createNotification(station){chrome.notifications.create("stationPlay",{type:"basic",title:station.name+" "+station.city,message:station.stream,iconUrl:"img/stations/"+station.logo}),history(station),setTimeout(function(){chrome.notifications.clear("stationPlay")},3e3)}function history(station){chrome.storage.local.get("history",function(data){var historyPlay=[station];data.history&&JSON.parse(data.history).forEach(function(element){station.id!=element.id&&historyPlay.length<8&&historyPlay.push(element)}),chrome.storage.local.set({history:JSON.stringify(historyPlay)})})}chrome.runtime.getBackgroundPage(function(backgroundPage){var xmlhttp=new XMLHttpRequest;xmlhttp.open("GET","stations.json",!0),xmlhttp.send(),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&new Vue({el:"#stations",data:{stations:JSON.parse(xmlhttp.response),titOptions:chrome.i18n.getMessage("titOptions"),msgFilter:chrome.i18n.getMessage("msgFilter"),msgPlay:chrome.i18n.getMessage("msgPlay")},methods:{btnPlay:function(station,event){event.preventDefault(),station.stream&&(backgroundPage.playerPlay(station.stream),createNotification(station)),_gaq.push(["_trackEvent","Radio","Options play",station.name+" - "+station.city])}}})}});var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-72863921-1"]),_gaq.push(["_trackPageview"]),function(){var ga=document.createElement("script");ga.type="text/javascript",ga.async=!0,ga.src="https://ssl.google-analytics.com/ga.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga,s)}();